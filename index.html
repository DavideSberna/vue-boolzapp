<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.3/build/global/luxon.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <title>Document</title>
</head>
<body>
    <div id="app">
      <div class="wrapper d-flex">
        <section id="left" class="bg-white border border-top-0 border-secondary-subtle">
                <div class="you-user d-flex justify-content-between align-items-center p-2">
                    <ul class="p-0 m-0 d-flex align-items-center">
                        <li class="circle me-2"><img src="./img/avatar_io.jpg" alt=""></li>
                        <li>Sofia</li>
                    </ul>
                    <ul class="p-0 m-0 d-flex">
                        <li><a href="#"><i class="fa-solid fa-rotate-right"></i></a></li>
                        <li><a href="#"><i class="fa-solid fa-message ms-3"></i></a></li>
                        <li><a href="#"><i class="fa-solid fa-ellipsis-vertical ms-3 me-2"></i></a></li>
                    </ul>
                </div>
                <div class="notifications d-flex align-items-center p-2">
                    <ul class="p-0 m-0 d-flex align-items-center">
                        <li class="circle-icon bg-white me-2"><i class="fa-solid fa-bell-slash"></i></li>
                        <li>
                            <span class="d-block">Ricevi notifiche di nuovi messaggi</span>
                            <span class="d-block"><a href="#">Attiva notifiche desktop</a></span>
                        </li>
                    </ul>  
                </div>
                <section>
                    <div class="p-2">
                        <div class="input-group mb-2">
                            <span class="input-group-text input-sm rounded-0" id="basic-addon1"><i class="fa-solid fa-magnifying-glass"></i></span>
                            <input type="text" class="form-control input-sm rounded-0" placeholder="Cerca o inizia una nuova" v-model="usersFilter" @keyup="searchFilter">
                        </div>
                    </div>
                    <div>
                        <div v-for="(items, index) of contacts" :key="items.id" @click="clickList(items, items.id)" :class="{'d-none' : !items.visible, 'd-block' : items.visible}">
                                <div class="border border-bottom-0 border-end-0 border-secondary-subtle">
                                    <ul class="p-0 m-0 d-flex justify-content-between align-items-center p-2">
                                        <li class="d-flex align-items-center">
                                            <span class="d-block circle me-2"><img :src="items.avatar" alt="items"></span>
                                            <div>
                                                <div>
                                                    <span class="d-block">{{items.name}}</span>
                                                </div>
                                                <div v-for="(mex, index) in items.messages">
                                                    <span  v-if="index === items.messages.length - 1">{{mex.message}}</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div v-for="(data, index) in items.messages">
                                                <p v-if="index === items.messages.length - 1">{{data.date}}</p>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                        </div>
                    </div>
                </section>
        </section>

 




        <section id="right" class="bg-right-img">
            
                <div class="you-user d-flex justify-content-between align-items-center p-2">
                    <ul class="p-0 m-0 d-flex align-items-center">
                        <li class="circle me-2"><img :src="contacts[current].avatar" alt=""></li>
                        <li>
                            <span class="d-block">{{contacts[current].name}}</span>
                            <span v-if="!writingStatus">Ultimo accesso: {{contacts[current].messages[contacts[current].messages.length - 1].date}}</span>   
                            <span v-if="writingStatus">{{writing}}</span>   
                        </li>
                    </ul>
                    <ul class="p-0 m-0 d-flex">
                        <li><a href="#"><i class="fa-solid fa-magnifying-glass"></i></a></li>
                        <li><a href="#"><i class="fa-solid fa-paperclip ms-3"></i></a></li>
                        <li><a href="#"><i class="fa-solid fa-ellipsis-vertical ms-3 me-2"></i></a></li>
                    </ul>
                </div>
            
            
            <section>
                <div>
                    <div >
                        <div v-for="items in userSelect.messages" ref="scroll">
                            <div v-if="items.status === 'sent'" class="send">
                                <div>
                                    <div>
                                        <div class="p-1">
                                            {{items.message}}
                                        </div>
                                        <div class="p-1">
                                            {{items.date}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-if="items.status === 'received'" class="received">
                                <div>
                                    <div>
                                        <div class="p-1">
                                            {{items.message}}
                                        </div>
                                        <div class="p-1">
                                            {{items.date}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            
                <div class="d-flex justify-content-center align-items-center you-user p-2">
                    <div class="me-4">
                        <a href="#"><i class="fa-regular fa-face-smile light-black"></i></a>
                    </div>
                    <div class="w-75">
                        <input class="form-control input-md" type="text" placeholder="Default input" v-model="messageText" @keyup.enter="messageSent">
                    </div>
                    <div class="ms-4">
                        <a href="#"><i class="fa-solid fa-microphone light-black"></i></a>
                    </div>
                </div>
            


        </section>
      </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.47/vue.global.min.js"></script>
    <script src="./js/index.js"></script>
</body>
</html>